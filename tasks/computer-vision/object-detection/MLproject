name: object-detection

conda_env: conda.yaml

entry_points:
  yolov3_weights_to_keras:
    parameters:
      darknet_model_path: {type: string, default: 'models/yolov3-spp.weights'}
      dataset: {type: string, default: 'data/coco.data'}
      SPP: {type: float, default: 1}
      kerasPath: {type: string, default: 'None'}
      darknet_url: {type: string, default: 'https://pjreddie.com/media/files/yolov3-spp.weights'}
    command: "python yolov3_weights_to_keras.py {darknet_model_path} {dataset} {SPP} {kerasPath}" 

  detector:
    parameters:
      mode: {type: string, default: 'image'}
      keras_model_path: {type: string, default: 'models/yolov3-spp.h5'}
      size: {type: float, default: 416}
      dataset: {type: string, default: 'data/coco.data'}
      file_name: {type: string, default: 'data/horses.jpg'}
      
      
    command: "python detector.py {mode} {keras_model_path} {size} {dataset} {file_name}"

  main:
    parameters:
      darknet_model_path: {type: string, default: 'models/yolov3-spp.weights'}
      dataset: {type: string, default: 'data/coco.data'}
      SPP: {type: float, default: 1}
      keras_model_path: {type: string, default: 'models/yolov3-spp.h5'}
      darknet_url: {type: string, default: 'https://pjreddie.com/media/files/yolov3-spp.weights'}
      mode: {type: string, default: 'image'}
      size: {type: float, default: 416}
      file_name: {type: string, default: 'data/horses.jpg'}
      
    
    command: "python main.py {darknet_model_path} {dataset} {SPP} {keras_model_path} {mode} {size} {file_name} {darknet_url}"
    